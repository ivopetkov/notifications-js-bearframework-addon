<?php

/*
 * Notifications JS package for Bear Framework
 * https://github.com/ivopetkov/notifications-js-bearframework-addon
 * Copyright (c) Ivo Petkov
 * Free to use under the MIT license.
 */

return <<<'EOT'
var ivoPetkov=ivoPetkov||{};ivoPetkov.bearFrameworkAddons=ivoPetkov.bearFrameworkAddons||{},ivoPetkov.bearFrameworkAddons.notifications=ivoPetkov.bearFrameworkAddons.notifications||function(){var t=[];idCounter=0;var e=e=>{var i=window.innerWidth,r=0,n=0;for(var a of t){var d=a[1];if(o(a[0])||d===e){var v=d.getBoundingClientRect();d.style.left=(i-v.width)/2+"px",d.style.bottom="calc(var(--tooltip-offset-bottom,0) + var(--tooltip-spacing,0)*"+n+" + "+r+"px)",r+=v.height,n++}}},o=e=>{for(var o of t){if(o[0]===e)return"visible"===o[1].getAttribute("data-notification-state")}return!1},i=i=>{if(o(i))for(var r of t)if(r[0]===i){var n=r[1];return n.setAttribute("data-notification-state","hidden"),e(),void setTimeout(()=>{n.parentNode.removeChild(n)},5e3)}},r=!1,n=function(){r||null===document.body||(r=!0,window.addEventListener("resize",e))};return document.addEventListener("readystatechange",()=>{n()}),n(),{show:(o,r)=>{void 0===r&&(r={});var n=void 0!==r.autoHide&&r.autoHide,a=void 0!==r.autoHideTimout?r.autoHideTimout:3e3,d=document.createElement("div"),v=(idCounter++,"ntf"+idCounter);return d.setAttribute("data-notification",""),d.innerText=o,d.addEventListener("click",()=>{i(v)}),document.body.appendChild(d),t.push([v,d]),e(d),new Promise(t=>{setTimeout(()=>{d.setAttribute("data-notification-state","visible"),t(),n&&setTimeout(()=>{i(v)},a)},16)})},hide:i,hideAll:()=>{for(var e of t)i(e[0])}}}();
EOT;