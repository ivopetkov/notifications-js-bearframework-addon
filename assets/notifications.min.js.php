<?php

/*
 * Notifications JS package for Bear Framework
 * https://github.com/ivopetkov/notifications-js-bearframework-addon
 * Copyright (c) Ivo Petkov
 * Free to use under the MIT license.
 */

return <<<'EOT'
var ivoPetkov=ivoPetkov||{};ivoPetkov.bearFrameworkAddons=ivoPetkov.bearFrameworkAddons||{},ivoPetkov.bearFrameworkAddons.notifications=ivoPetkov.bearFrameworkAddons.notifications||function(){var t=[];idCounter=0;var e=e=>{var i=Math.min(window.innerWidth,Math.floor(document.body.getBoundingClientRect().width)),n=0,r=0;for(var a of t){var d=a[1];if(o(a[0])||d===e){var v=d.getBoundingClientRect();d.style.left=(i-v.width)/2+"px",d.style.bottom="calc(var(--tooltip-offset-bottom,0) + var(--tooltip-spacing,0)*"+r+" + "+n+"px)",n+=v.height,r++}}},o=e=>{for(var o of t){if(o[0]===e)return"visible"===o[1].getAttribute("data-notification-state")}return!1},i=i=>{if(o(i))for(var n of t)if(n[0]===i){var r=n[1];return r.setAttribute("data-notification-state","hidden"),e(),void setTimeout(()=>{r.parentNode.removeChild(r)},5e3)}},n=!1,r=function(){n||null===document.body||(n=!0,window.addEventListener("resize",e))};return document.addEventListener("readystatechange",()=>{r()}),r(),{show:(o,n)=>{void 0===n&&(n={});var r=void 0!==n.autoHide&&n.autoHide,a=void 0!==n.autoHideTimout?n.autoHideTimout:3e3,d=document.createElement("div"),v=(idCounter++,"ntf"+idCounter);return d.setAttribute("data-notification",""),d.innerText=o,d.addEventListener("click",()=>{i(v)}),document.body.appendChild(d),t.push([v,d]),e(d),new Promise(t=>{setTimeout(()=>{d.setAttribute("data-notification-state","visible"),t(),r&&setTimeout(()=>{i(v)},a)},16)})},hide:i,hideAll:()=>{for(var e of t)i(e[0])}}}();
EOT;